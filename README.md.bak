# Transcriber â€” I Hardly Knew Her ğŸ“¼ğŸ™ï¸

**A privacy-first, offline-first audio transcription app.** Record audio in the browser and transcribe locally using Whisper.cpp (WebAssembly) â€” no audio leaves your device unless you explicitly export it.

## Overview

Transcriber is an offline-first, privacy-focused transcription application. It records audio locally in the browser and performs transcription locally using Whisper.cpp (WebAssembly), so audio never leaves the device unless you choose to export it.

## Quickstart

Prerequisite: Bun v1.0+

```bash
# Install dependencies
bun install

# Start development services (client + server)
bun run dev
```

- Client: http://localhost:5173
- Server: http://localhost:3000

Copy `.env.example` to `.env` and set `BETTER_AUTH_SECRET` and `VITE_SERVER_URL` as needed.

## Features

- ğŸ™ï¸ **Local Recording** â€” Record audio directly in the browser
- ğŸ—£ï¸ **Local Transcription** â€” Whisper.cpp (WASM)
- ğŸ” **Multi-tenant Auth** â€” Server-side authentication (better-auth) - really only needed to separate profiles who may use the same device
- ğŸ’¾ **Offline-First** â€” Client-side persistence via Dexie / IndexedDB
- ğŸ“‚ **Hierarchical Organization** â€” Subjects â†’ Recordings
- ğŸ¨ **Theme Presets & PWA** â€” Multiple themes and installable as an app

## Tech Stack

- **Frontend**: React + Vite + Tailwind CSS
- **Backend**: Bun + Hono
- **Transcription**: Whisper.cpp (WebAssembly)
- **Client DB**: Dexie / IndexedDB
- **Server DB**: bun:sqlite (auth)
- **Monorepo**: Turbo (workspaces)

## Architecture

A high-level overview of the system and the common flow for recording â†’ transcribing â†’ storing.

### Component diagram

<!-- Source: docs/diagrams/component.mmd -->

```mermaid
flowchart LR
  subgraph Browser
    U[User Browser / PWA]
    UI[Recorder UI]
    WASM["Whisper.cpp (WASM)"]
    DB_Client["Dexie / IndexedDB"]
  end

  subgraph Server
    API[Hono API]
    AUTH[better-auth]
    DB_Server[bun:sqlite]
    BACKUP[Backups / Exports]
  end

  U --> UI
  UI -->|record| DB_Client
  UI -->|send audio| WASM
  WASM -->|transcript| UI
  UI -->|sync/auth| API
  API --> AUTH
  API --> DB_Server
  API --> BACKUP
  note right of U
    Optional Tauri desktop build (src-tauri)
  end note
```

### Sequence diagram (record & transcribe)

<!-- Source: docs/diagrams/sequence.mmd -->

```mermaid
sequenceDiagram
  participant User
  participant Browser
  participant Whisper
  participant Server

  User->>Browser: Start recording
  Browser->>Browser: Save chunks to Dexie
  Browser->>Whisper: "Transcribe audio chunk (WASM)"
  Whisper-->>Browser: Transcript
  Browser->>Server: Sync recording + transcript (auth)
  Server-->>DB_Server: Persist metadata
  Server-->>Browser: Ack
```

> Note: Mermaid diagrams render on GitHub and in many Markdown viewers (VS Code with Mermaid preview). If you need PNG/SVG exports, use a Mermaid renderer or VS Code extension.

## Where to find more

- `TRANSCRIBER_README.md` â€” detailed project notes and setup
- `QUICK_REFERENCE.md` â€” quick ops & commands
- `PROGRESS.md` â€” development status and roadmap

## Project Structure

Top-level overview (not exhaustive):

```
.
â”œâ”€â”€ client/               # React frontend (Vite + Tailwind + PWA)
â”œâ”€â”€ server/               # Hono backend (routes, auth, server db)
â”œâ”€â”€ shared/               # Shared TypeScript packages / types
â”œâ”€â”€ docs/                 # Documentation and design notes
â”œâ”€â”€ e2e/                  # Playwright end-to-end tests
â”œâ”€â”€ landing/              # Marketing/landing site
â”œâ”€â”€ static/               # Static assets / service worker / webmanifest
â”œâ”€â”€ src-tauri/            # Tauri desktop app config (optional desktop build)
â”œâ”€â”€ scripts/              # Dev / ops helper scripts (backup, deploy)
â”œâ”€â”€ test-results/         # Test artifacts and reports
â”œâ”€â”€ docker-compose.yaml   # Service orchestration for local/dev
â”œâ”€â”€ package.json          # Root package.json and workspace configuration
â””â”€â”€ turbo.json            # Turbo monorepo config
```

### Server

This project uses Hono as the backend framework for its small footprint and plugin ecosystem. Declaring routes and returning data is straightforward.

```
server
â”œâ”€â”€ bun.lock
â”œâ”€â”€ package.json
â”œâ”€â”€ README.md
â”œâ”€â”€ src
â”‚Â Â  â””â”€â”€ index.ts
â””â”€â”€ tsconfig.json
```

```typescript src/index.ts
import { Hono } from 'hono'
import { cors } from 'hono/cors'
import type { ApiResponse } from 'shared/dist'

const app = new Hono()

app.use(cors())

app.get('/', (c) => {
  return c.text('Hello Hono!')
})

app.get('/hello', async (c) => {

  const data: ApiResponse = {
    message: "Hello Transcriber!",
    success: true
  }

  return c.json(data, { status: 200 })
})

export default app
```

If you wanted to add a database to Hono you can do so with a multitude of Typescript libraries like [Supabase](https://supabase.com), or ORMs like [Drizzle](https://orm.drizzle.team/docs/get-started) or [Prisma](https://www.prisma.io/orm)

### Client

The client is a Vite + React (TypeScript) app; build UI with your preferred libraries (e.g., [shadcn/ui]) and add routing with [React Router].

```
client
â”œâ”€â”€ eslint.config.js
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ public
â”‚Â Â  â””â”€â”€ favicon.svg
â”œâ”€â”€ README.md
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ App.css
â”‚Â Â  â”œâ”€â”€ App.tsx
â”‚Â Â  â”œâ”€â”€ assets
â”‚Â Â  â”œâ”€â”€ index.css
â”‚Â Â  â”œâ”€â”€ main.tsx
â”‚Â Â  â””â”€â”€ vite-env.d.ts
â”œâ”€â”€ tsconfig.app.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tsconfig.node.json
â””â”€â”€ vite.config.ts
```

```typescript src/App.tsx
import { useState } from 'react'
import beaver from './assets/beaver.svg'
import { ApiResponse } from 'shared'
import './App.css'

const SERVER_URL = import.meta.env.VITE_SERVER_URL || "http://localhost:3000"

function App() {
  const [data, setData] = useState<ApiResponse | undefined>()

  async function sendRequest() {
    try {
      const req = await fetch(`${SERVER_URL}/hello`)
      const res: ApiResponse = await req.json()
      setData(res)
    } catch (error) {
      console.log(error)
    }
  }

  return (
    <>
      <div>
        <a href="#" target="_blank">
          <img src={beaver} className="logo" alt="app logo" />
        </a>
      </div>
      <h1>Transcriber</h1>
      <h2>Bun + Hono + Vite + React</h2>
      <p>A typesafe fullstack monorepo</p>
      <div className="card">
        <button onClick={sendRequest}>
          Call API
        </button>
        {data && (
          <pre className='response'>
            <code>
            Message: {data.message} <br />
            Success: {data.success.toString()}
            </code>
          </pre>
        )}
      </div>
      <p className="read-the-docs">
        Click the logo to learn more
      </p>
    </>
  )
}

export default App
```

### Shared

The Shared package is used for anything you want to share between the Server and Client. This could be types or libraries that you use in both environments.

```
shared
â”œâ”€â”€ package.json
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ index.ts
â”‚Â Â  â””â”€â”€ types
â”‚Â Â      â””â”€â”€ index.ts
â””â”€â”€ tsconfig.json
```

Inside the `src/index.ts` we export any of our code from the folders so it's usable in other parts of the monorepo

```typescript
export * from "./types"
```

By running `bun run dev` or `bun run build` it will compile and export the packages from `shared` so it can be used in either `client` or `server`

```typescript
import { ApiResponse } from 'shared'
```

## Getting Started

### Quick Start

See `TRANSCRIBER_README.md` for full setup, configuration, and environment variables.

### Installation

```bash
# Install dependencies for all workspaces
bun install
```

### Development

```bash
# Run all workspaces in development mode with Turbo
bun run dev

# Or run individual workspaces directly
bun run dev:client    # Run the Vite dev server for React
bun run dev:server    # Run the Hono backend
```

### Building

```bash
# Build all workspaces with Turbo
bun run build

# Or build individual workspaces directly
bun run build:client  # Build the React frontend
bun run build:server  # Build the Hono backend
```

### Additional Commands

```bash
# Lint all workspaces
bun run lint

# Type check all workspaces
bun run type-check

# Run tests across all workspaces
bun run test
```

### Deployment

Deployment depends on your target environment (static host, container, or edge). See `DEPLOYMENT.md` and `docs/` for platform-specific guidance.

## Type Sharing

Types are automatically shared between the client and server thanks to the shared package and TypeScript path aliases. You can import them in your code using:

```typescript
import { ApiResponse } from 'shared/types';
```

## Learn More

- `TRANSCRIBER_README.md` â€” project documentation
- [Bun Documentation](https://bun.sh/docs)
- [Vite Documentation](https://vitejs.dev/guide/)
- [React Documentation](https://react.dev/learn)
- [Hono Documentation](https://hono.dev/docs)
- [Turbo Documentation](https://turbo.build/docs)
- [TypeScript Documentation](https://www.typescriptlang.org/docs/)
